<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>qr</title>
  <style>
    /* page must show nothing but the QR cide */
    html,body{height:100%;margin:0;background:#fff}
    /* keep only the image centeredd and nothing else */
    img{display:block;max-width:96vmin;max-height:96vmin;margin:auto;position:relative;top:50%;transform:translateY(-50%);}
  </style>
</head>
<body>
  <!-- The page intentionally contains only the QR image element. -->
  <img id="qr" alt="QR code" />

  <script>
    // Read ?q=<text or url> and show a QR code only. If q is missing, the page stays blank.
    (function(){
      function getParam(name){
        const url = new URL(location.href);
        return url.searchParams.get(name);
      }

      const q = getParam('q');
      if(!q){
        // nothing to show — keep page empty (no text, no UI)
        // ensure image is removed for absolute emptiness
        const img = document.getElementById('qr');
        img.remove();
        return;
      }

      // optional size param (number of pixels); default 800
      const sizeParam = parseInt(getParam('s')) || 800;
      const size = Math.max(64, Math.min(2000, sizeParam));

      // use of the Google Chart API static QR generator — small, reliable, works on GH Pages.
      // If you prefer a fully local JS implementation (no external requests), swap this logic
      // for an embedded QR library such as qrcodejs or qr-code-styling.
      const data = encodeURIComponent(q);
      const src = `https://chart.googleapis.com/chart?cht=qr&chs=${size}x${size}&chl=${data}&chld=L|1`;

      const img = document.getElementById('qr');
      img.src = src;
      // remove alt text so nothing else is visible to screen readers by default
      img.alt = '';

      // Prevent any accidental UI like context menus from appearing (keeps "only image" feel)
      window.addEventListener('contextmenu', e => e.preventDefault());

      // If embedded in an <iframe> with a white background, ensure body is same color
      // so the page appears to be only the QR code.
    })();
  </script>
</body>
</html>
